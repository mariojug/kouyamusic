(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{11:function(e,a,t){e.exports={popupWrapper:"Popup_popupWrapper__2h78Z",windowWrap:"Popup_windowWrap__OaFoZ",window:"Popup_window__OkeNT",titleText:"Popup_titleText__Bp0MC",title:"Popup_title__2bfzC",x:"Popup_x__DkSxK",closePopup:"Popup_closePopup__26qlS",content:"Popup_content__2zQ1y",descript:"Popup_descript__lojJO"}},14:function(e,a,t){e.exports={audioPlayer:"AudioPlayer_audioPlayer__13AuN",playPause:"AudioPlayer_playPause__1YTuI",play:"AudioPlayer_play__3o9O3",currentTime:"AudioPlayer_currentTime__2NCH2",duration:"AudioPlayer_duration__BXnqM",progressBarWrapper:"AudioPlayer_progressBarWrapper__VxRNr",progressBar:"AudioPlayer_progressBar__1gNLL"}},15:function(e,a,t){e.exports={banner_wrapper:"Banner_banner_wrapper__iZ_1_",banner:"Banner_banner__1qDln",item:"Banner_item__1Wxsl",logo:"Banner_logo__2H-oq","hover-animation":"Banner_hover-animation__1rlz6"}},37:function(e,a,t){e.exports={beatStore:"Beatstore_beatStore__3fMZZ"}},38:function(e,a,t){e.exports=t(65)},43:function(e,a,t){},65:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),c=t(34),l=t.n(c),o=(t(43),t(2)),s=t(5),m=r.a.createContext(null),i=r.a.createContext(null),u=r.a.createContext(null),p=r.a.createContext(null),d=function(e,a,t){return{id:e,title:a,type:t,timeAdded:Date.now()}},_=function(e){var a=e.children,t=r.a.useState({}),n=Object(s.a)(t,2),c=n[0],l=n[1],i=r.a.useState(0),u=Object(s.a)(i,2),p=u[0],_=u[1],E={0:{price:0,descript:"Select lease type"},1:{price:40,descript:"$40 USD | .MP3 Lease + Stems"},2:{price:85,descript:"$85 USD | .WAV Lease + Stems"}};r.a.useEffect((function(){if("undefined"!==typeof window){var e=JSON.parse(localStorage.kouyaCart);e&&l(e)}}),[]),r.a.useEffect((function(){"undefined"!==typeof window&&c&&(localStorage.kouyaCart=JSON.stringify(c))}),[c]),r.a.useEffect((function(){for(var e=0,a=0,t=Object.entries(c);a<t.length;a++){var n=Object(s.a)(t[a],2),r=(n[0],n[1]);e+=E[r.type].price}_(e)}),[c,E]);return r.a.createElement(m.Provider,{value:{cart:c,addToCart:function(e,a,t){var n=Object(o.a)({},c);n[e]=d(e,a,t),l(n)},removeFromCart:function(e){var a=Object(o.a)({},c);delete a[e],l(a)},clearCart:function(){l([])},isInCart:function(e){return c.map((function(a){return a.id===e})).some()},leaseOptions:E,cartTotal:p}},a)},E=function(e){var a=e.children,t=r.a.useState([]),n=Object(s.a)(t,2),c=n[0],l=n[1];return r.a.createElement(i.Provider,{value:{playArray:c,setPlayArray:l}},a)},f=t(66),C=t(11),v=t.n(C),b=function(e){return e.isOpen?r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{className:v.a.popupWrapper},r.a.createElement(f.a,{className:v.a.windowWrap},r.a.createElement(f.a,{className:v.a.window},r.a.createElement(f.a,{className:v.a.content},r.a.createElement(f.a,{className:v.a.title},r.a.createElement("h1",{className:v.a.titleText},e.title)),r.a.createElement(f.a,{className:v.a.descript},r.a.createElement("p",null,e.descript),r.a.createElement("p",{className:v.a.closePopup,onClick:e.onClose},"click here to dismiss"))),r.a.createElement(f.a,{className:v.a.x,onClick:e.onClose},"[x]"))))):null},g=function(e){var a=e.children,t=r.a.useState(!1),n=Object(s.a)(t,2),c=n[0],l=n[1],o=r.a.useState({title:"",descript:""}),m=Object(s.a)(o,2),i=m[0],p=m[1];return r.a.createElement(u.Provider,{value:[l,p]},r.a.createElement(b,{isOpen:c,onClose:function(){l(!1),p({title:"",descript:""})},title:i.title,descript:i.descript}),a)},y=t(35),N=t.n(y),S=function(e){var a=e.children,t=r.a.useState([]),n=Object(s.a)(t,2),c=n[0],l=n[1],o=r.a.useState(!1),m=Object(s.a)(o,2),i=m[0],u=m[1];r.a.useEffect((function(){var e=!!localStorage.kouyaSrcExpire&&parseInt(localStorage.kouyaSrcExpire);!e||Date.now()>=e?d():(l(JSON.parse(localStorage.kouyaSrc)),u(!0))}),[]),r.a.useEffect((function(){localStorage.setItem("kouyaSrc",JSON.stringify(c))}),[c]);var d=function(){N.a.post("api/beatstore/load").then((function(e){localStorage.setItem("kouyaSrcExpire",e.headers.expires);var a={};e.data.map((function(e,t){return a[e.id]={audioURL:e.audioURL,name:e.name,tags:e.tags,musicKey:e.musicKey,bpm:e.bpm,coverURL:e.coverURL,key:t},null})),l(a),u(!0)}))};return r.a.createElement(p.Provider,{value:{srcContent:c,getFromSrc:function(e,a){return c[e][a]},loadSrc:d,srcLoaded:i}},a)},B=t(24),h=t(23),k=function(){return r.a.useContext(m)},O=function(){return r.a.useContext(i)},x=function(){return r.a.useContext(p)},P=t(14),T=t.n(P);function j(e){var a=Object(n.useState)(!1),t=Object(s.a)(a,2),c=t[0],l=t[1],o=Object(n.useState)(0),m=Object(s.a)(o,2),i=m[0],u=m[1],p=Object(n.useState)(0),d=Object(s.a)(p,2),_=d[0],E=d[1],C=Object(n.useRef)(),v=Object(n.useRef)(),b=Object(n.useRef)(),g=O(),y=g.playArray,N=g.setPlayArray;r.a.useEffect((function(){if(y&&c!==y[e.idx]){l(!1);var a=Object(B.a)(y);a[e.idx]=!1,N(a),C.current.pause(),cancelAnimationFrame(b.current)}}),[y,c,N,e.idx]);var S=function(){var e=Math.floor(C.current.duration);u(e),v.current.max=e},k=function(e){var a=Math.floor(e/60),t=a<10?"0".concat(a):"".concat(a),n=Math.floor(e%60),r=n<10?"0".concat(n):"".concat(n);return"".concat(t,":").concat(r)},x=function e(){v.current.value=C.current.currentTime,P(),b.current=requestAnimationFrame(e)},P=function(){v.current.style.setProperty("--seek-before-width","".concat(v.current.currentTime/i*100,"%")),E(v.current.value)};return r.a.createElement(f.a,{className:T.a.audioPlayer},r.a.createElement("audio",{ref:C,src:e.srcUrl,preload:"metadata",onPlay:S,onLoadedMetadata:S,onEnded:function(){l(!c)}}),r.a.createElement("button",{onClick:function(){var a,t=c;l(!t),t?((a=Object(B.a)(y))[e.idx]=!1,N(a),C.current.pause(),cancelAnimationFrame(b.current)):(C.current.play(),b.current=requestAnimationFrame(x),(a=new Array(y.length).fill(!1))[e.idx]=!0,N(a))},className:T.a.playPause},c?r.a.createElement(h.a,null):r.a.createElement(h.b,{className:T.a.play})),r.a.createElement("div",{className:T.a.currentTime},k(_)),r.a.createElement("div",{className:T.a.progressBarWrapper},r.a.createElement("input",{type:"range",className:T.a.progressBar,defaultValue:"0",ref:v,onChange:function(){C.current.currentTime=v.current.value,P()}})),r.a.createElement("div",{className:T.a.duration},!isNaN(i)&&k(i)))}var w=t(67),F=t(36),A=t(68),I=t(69),W=t(18),L=t(8),R=t.n(L),U=function(e){var a=k(),t=a.cart,n=a.addToCart,c=a.removeFromCart,l=a.leaseOptions,o=r.a.useContext(u),m=Object(s.a)(o,2),i=m[0],p=m[1],d=r.a.useState(!1),_=Object(s.a)(d,2),E=_[0],C=_[1],v=r.a.useState(!1),b=Object(s.a)(v,2),g=b[0],y=b[1];r.a.useEffect((function(){t[e.id]?y(!0):y(!1)}),[t,e.id,y]);var N=r.a.useRef(),S=r.a.createElement(r.a.Fragment,null,"\xa0\xa0\xa0\xa0");return r.a.createElement(f.a,{className:R.a.componentWrapper},r.a.createElement(w.a,{className:R.a.component},r.a.createElement(F.a,{lg:2,className:R.a.coverStack},r.a.createElement("img",{src:e.coverURL,alt:e.name,className:R.a.cover})),r.a.createElement(F.a,{lg:7,className:R.a.audioStack},r.a.createElement(w.a,{className:R.a.audioStackElem},r.a.createElement(j,{srcUrl:e.audioURL,idx:e.id})),r.a.createElement(w.a,{className:R.a.audioStackElem},r.a.createElement("div",{className:R.a.title},r.a.createElement("h2",{className:R.a.titleText},"// ",e.name)),r.a.createElement("p",{className:R.a.showDetails,onClick:function(){C(!E)}},"show details")),E?r.a.createElement(w.a,{className:R.a.details},r.a.createElement(F.a,{className:R.a.tagsCol},r.a.createElement("b",null,"tags"),":",r.a.createElement("i",null,S,e.tags.map((function(e){return"#".concat(e," ")})))),r.a.createElement(F.a,{className:R.a.keyCol},r.a.createElement("b",null,"key"),":",r.a.createElement("i",null,S,e.musicKey)),r.a.createElement(F.a,{className:R.a.tempoCol},r.a.createElement("b",null,"tempo"),":",r.a.createElement("i",null,S,e.bpm," bpm\xa0"))):r.a.createElement(r.a.Fragment,null)),r.a.createElement(F.a,{className:R.a.cartStack,lg:3},r.a.createElement(A.a.Control,{ref:N,size:"sm",as:"select","aria-label":"Beat lease select",className:R.a.selectButtonElem},r.a.createElement("option",{value:0},l[0].descript),r.a.createElement("option",{value:1},l[1].descript),r.a.createElement("option",{value:2},l[2].descript)),r.a.createElement(f.a,{className:R.a.cartStackElem},r.a.createElement(I.a,{size:"sm",onClick:function(){var a=parseInt(N.current.value);if(1!==a&&2!==a)return p({title:"Warning",descript:"Please select a lease type for this beat before continuing"}),i(!0),null;var r=t[e.id];if(r){var c={title:"Warning",descript:""};c.descript=r===a?"This lease selection has already been added to your cart. Purchases are limited to one lease per beat.":"A lease selection has already been added to your cart. This action has updated the lease type for this beat. Purchases are limited to one lease per beat.",p(c),i(!0)}n(e.id,e.name,a)},className:R.a.addToCartButton,variant:"dark"},"Add",r.a.createElement(W.a,{className:R.a.addToCartIcon})),g?r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{size:"sm",onClick:function(){c(e.id)},className:R.a.rmFromCartButton,variant:"danger"},"Remove",r.a.createElement(W.b,{className:R.a.addToCartIcon}))):r.a.createElement(r.a.Fragment,null)),g?r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{className:R.a.inCartElem},r.a.createElement("h6",{className:R.a.inCartTitle},"In cart:"),r.a.createElement("p",{className:R.a.inCartDescript},t[e.id]?"(".concat(l[t[e.id].type].descript,")"):r.a.createElement(r.a.Fragment,null)))):r.a.createElement(r.a.Fragment,null))))},z=t(9),D=t.n(z),J=function(e){var a=k(),t=a.addToCart,n=a.removeFromCart,c=a.leaseOptions,l=x(),o=l.getFromSrc,m=l.srcLoaded,i=r.a.useState(0),u=Object(s.a)(i,2),p=u[0],d=u[1],_=r.a.useRef(),E=r.a.useState("https://cdn.pixabay.com/photo/2015/04/23/22/00/tree-736885__480.jpg"),C=Object(s.a)(E,2),v=C[0],b=C[1];r.a.useEffect((function(){_.current.value=e.type,d(e.type)}),[e.type,d]),r.a.useEffect((function(){var a=o(e.id,"coverURL");b(a)}),[m,o,e.id,b]);return r.a.createElement(f.a,{className:D.a.componentWrapper},r.a.createElement(w.a,{className:D.a.component},r.a.createElement(F.a,{lg:3},r.a.createElement("img",{src:v,alt:e.name,className:D.a.cover})),r.a.createElement(F.a,{lg:7,className:D.a.contentWrapper},r.a.createElement(f.a,{className:D.a.title},r.a.createElement("h3",{className:D.a.titleText},"// ",e.name)),r.a.createElement(f.a,{className:D.a.detailElem},r.a.createElement(A.a.Control,{ref:_,size:"md",as:"select","aria-label":"Beat lease select",className:D.a.selectElem,onChange:function(){var a=parseInt(_.current.value);t(e.id,e.name,a),d(a)}},r.a.createElement("option",{value:1},c[1].descript),r.a.createElement("option",{value:2},c[2].descript))),r.a.createElement(f.a,{className:D.a.cartInteractElem},r.a.createElement(I.a,{size:"sm",onClick:function(){n(e.id)},className:D.a.rmFromCartButton,variant:"danger"},"Remove\xa0",r.a.createElement(W.b,{className:D.a.addToCartIcon})),r.a.createElement("h5",{className:D.a.currentPrice}," $ ",c[p].price.toFixed(2))),r.a.createElement(f.a,{className:D.a.detailElem}))))},M=t(15),Z=t.n(M),K=function(){return r.a.createElement(f.a,{className:Z.a.banner_wrapper},r.a.createElement(w.a,{className:Z.a.banner},r.a.createElement(F.a,{className:Z.a.item},"About"),r.a.createElement(F.a,{className:Z.a.item},"Contact"),r.a.createElement(F.a,{className:Z.a.logo},"kouya"),r.a.createElement(F.a,{className:Z.a.item},"Beats"),r.a.createElement(F.a,{className:Z.a.item},"Cart")))},q=function(){return r.a.createElement(f.a,null,"About page")},H=t(37),X=t.n(H),V=function(){var e=r.a.useState(r.a.createElement("span",null)),a=Object(s.a)(e,2),t=a[0],n=a[1],c=O().setPlayArray,l=x().srcContent;return r.a.useEffect((function(){for(var e=[],a=0,t=Object.entries(l);a<t.length;a++){var o=Object(s.a)(t[a],2),m=o[0],i=o[1];e.push(r.a.createElement(U,{id:m,audioURL:i.audioURL,name:i.name,tags:i.tags,musicKey:i.musicKey,bpm:i.bpm,coverURL:i.coverURL,key:m+"bc"}))}n(e);var u=new Array(e.length).fill(!1);c(u)}),[l,c,n]),r.a.createElement(E,null,r.a.createElement(f.a,{fluid:!0,className:X.a.beatStore},t))},Y=function(){var e=r.a.useState([]),a=Object(s.a)(e,2),t=a[0],n=a[1],c=k(),l=c.cart,o=c.cartTotal,m=x().srcLoaded,i=r.a.useCallback((function(){if(console.log("callback"),Object.keys(l).length>0){var e=[];Object.keys(l).forEach((function(a){e.push(r.a.createElement(J,{id:l[a].id,name:l[a].title,type:l[a].type,key:a+"cart"}))})),n(e)}else n([])}),[l]);return r.a.useEffect((function(){m&&i()}),[m,i,l]),r.a.createElement(f.a,null,m?t:r.a.createElement(r.a.Fragment,null),r.a.createElement(f.a,null,"Total: ",o," ",String(m)))},G=function(){return r.a.createElement(f.a,null,"Contact page")},$=function(){return r.a.createElement(f.a,null,"Splash page")},Q=function(){return r.a.createElement(g,null,r.a.createElement(_,null,r.a.createElement(E,null,r.a.createElement(S,null,r.a.createElement(K,null),r.a.createElement($,null),r.a.createElement(q,null),r.a.createElement(G,null),r.a.createElement(V,null),r.a.createElement(Y,null)))))},ee=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,70)).then((function(a){var t=a.getCLS,n=a.getFID,r=a.getFCP,c=a.getLCP,l=a.getTTFB;t(e),n(e),r(e),c(e),l(e)}))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Q,null)),document.getElementById("root")),ee()},8:function(e,a,t){e.exports={componentWrapper:"BeatComponent_componentWrapper__3QnvD",component:"BeatComponent_component__1gM1e",cover:"BeatComponent_cover__vXCaz",audioStack:"BeatComponent_audioStack__aIcvs",cartStack:"BeatComponent_cartStack__2Lmvg",coverStack:"BeatComponent_coverStack__RjchI",audioStackElem:"BeatComponent_audioStackElem__2-Btz",cartStackElem:"BeatComponent_cartStackElem__qZI35",selectButtonElem:"BeatComponent_selectButtonElem__2wJIU",inCartElem:"BeatComponent_inCartElem__GgsMo",details:"BeatComponent_details__14ag0",addToCartButton:"BeatComponent_addToCartButton__1JeZp",rmFromCartButton:"BeatComponent_rmFromCartButton__2IXSz",title:"BeatComponent_title__3Z8YW",titleText:"BeatComponent_titleText__Z6tGf",showDetails:"BeatComponent_showDetails__ITXcZ",addToCartIcon:"BeatComponent_addToCartIcon__1JImK",tagsCol:"BeatComponent_tagsCol__39_cm",tempoCol:"BeatComponent_tempoCol__vkoYU",keyCol:"BeatComponent_keyCol__3dPNh",inCartTitle:"BeatComponent_inCartTitle__2gH5k",inCartDescript:"BeatComponent_inCartDescript__3vCVf"}},9:function(e,a,t){e.exports={componentWrapper:"CartComponent_componentWrapper__2vBzS",component:"CartComponent_component__3tKUb",cover:"CartComponent_cover__30jxZ",contentWrapper:"CartComponent_contentWrapper__XzJTB",rmFromCartButton:"CartComponent_rmFromCartButton__3YiR_",title:"CartComponent_title__tUn_8",titleText:"CartComponent_titleText__2H1cJ",selectElem:"CartComponent_selectElem__1lH7z",cartInteractElem:"CartComponent_cartInteractElem__1K5Nv",detailElem:"CartComponent_detailElem__bK79a",currentPrice:"CartComponent_currentPrice__3g1dG"}}},[[38,1,2]]]);
//# sourceMappingURL=main.d9dc8ab2.chunk.js.map